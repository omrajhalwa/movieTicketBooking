<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="/css/rating.css">



<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
body,html{
    margin: 0% !important;
    padding: 0% !important;
    background: linear-gradient(120deg,#000000, #2e2e2c,rgb(0, 0, 0)) !important;
      color: aliceblue !important;
      font-family: Poppins !important;
      box-sizing: border-box;
}

.movieCard{
  margin-top: 7rem;
  background-color: white;
  display: flex;
  align-items: center;
  border: 1px solid white;
  padding: 2%;
  color: black;
 
  width: 100%;
}
.movieImage{
  margin-left: 7rem;
}
.movieImage img{
  border-radius: 1rem;
  
}

.movieDescription{
  text-align: center;
  margin-left: 2rem;
  
}

.movieDescription p{
  font-size: larger;
  font-weight: 600;
}

.bookTicket{
  background-color:#eb3052;
  color:white;
  font-size: 1.7rem;
  font-weight: bold;
  border-radius: 0.5rem;
}
.btns{
  display: flex;
  height: 15rem;
  align-items: center;
  margin-left: 3rem;
  
}
</style>
<div class="container-fluid">

<div class="row row-cols-lg-1 row-cols-md-1 row-cols-sm-1 mt-3 d-flex">

    
    <div class="movieCard " style="background: linear-gradient(120deg,#282525,rgb(163, 160, 163),#282525) !important;">
      
      <div class="movieImage">
        <img src="<%=listing.image%>" alt="img" class="card-img-top mt-2" style="height: 25rem; width: 18rem;">
      </div>
        <div class="movieDescription">
            <b> <h4 class="card-text" style="font-size: 2.5rem; font-weight: 700;"><%=listing.title%></h4></b>
            
            <p class=""><%=listing.language%></p>
            <p class="card-text"><%=listing.rating%></p>
            <div class="d-flex">
              <p class="" style="margin-left: 8rem;background-color: white;padding: 3px;border-radius: 6px;"> <%=listing.duration%></p>
              <p class="" style="margin-left: 1rem;background-color: white;padding: 3px;border-radius: 6px;"><%=listing.movieType%></p>
              <p class="" style="margin-left: 1rem;background-color: white;padding: 3px;border-radius: 6px;"><%=listing.certifiedRating%></p>
              <p class="" style="margin-left: 1rem;background-color: white;padding: 3px;border-radius: 6px;"><%=listing.releaseDate%></p>
            </div>
          
            <p class="card-text">vendor name -<%=listing.owner.username%></p>

            <form action="/listings/<%=listing._id%>/availableTheatre" method="GET">
              <button class="bookTicket">Book Ticket</button>
            </form>
           </div>
    </div>


   
    <div class="btns">

        <a href="/listings/<%=listing._id%>/edit" class="btn btn-primary col-1 offset-3 edit-btn" style="">edit</a>
    
      
        
        <form action="/listings/<%=listing._id%>?_method=DELETE" method="POST">
           <button class="btn btn-primary  offset-5">delete</button>
        </form>

        <form action="/listings/<%=listing._id%>/casts" method="GET">
          <button class="btn btn-primary  offset-5">enter casts</button>
       </form>
       <form action="/listings/<%=listing._id%>/theatres" method="GET">
        <button class="btn btn-primary  offset-5">add theatre</button>
     </form>
    </div>


    <h3 style="margin-left: 3rem;">About</h3>
    <p class="card-text" style="margin-left: 3rem;"><%=listing.description%>
      <hr>
      <h3 style="margin-left: 3rem;">Casts</h3>
      <div class="d-flex ms-5">
      <%for(let cast of listing.casts){%>
        <div class=" listing-card m-2 ">
          <img src="<%=cast.image%>" alt="img" class="card-img-top" style="height: 10rem; width: 10rem;border-radius: 50%;">
          </div>
      <%}%>
    </div>
   


        <div class="col-8  mb-3">
            <hr>
           
            <h4 style="margin-left: 3rem;">Leave a Review</h4>
            <form action="/listings/<%= listing.id%>/reviews" method="POST" novalidate class="needs-validation">
             
              <div class="mb-3 mt-3 ms-3">
                <label for="rating" class="form-label" style="margin-left: 3rem;">Rating</label>
              <fieldset class="starability-slot" style="margin-left: 3rem;">
          
                <input type="radio" id="no-rate" class="input-no-rate" name="review[rating]" value="1" checked aria-label="No rating." />
                <input type="radio" id="first-rate1" name="review[rating]" value="1" />
                <label for="first-rate1" title="Terrible">1 star</label>
                <input type="radio" id="first-rate2" name="review[rating]" value="2" />
                <label for="first-rate2" title="Not good">2 stars</label>
                <input type="radio" id="first-rate3" name="review[rating]" value="3" />
                <label for="first-rate3" title="Average">3 stars</label>
                <input type="radio" id="first-rate4" name="review[rating]" value="4" />
                <label for="first-rate4" title="Very good">4 stars</label>
                <input type="radio" id="first-rate5" name="review[rating]" value="5" />
                <label for="first-rate5" title="Amazing">5 stars</label>
              </fieldset>
              </div>
          
              <div class="mb-3 mt-3" style="margin: 3rem;">
                <label for="comment" class="form-label">Comments</label>
                <textarea name="review[comment]" id="comment" cols="30" rows="5" class="form-control" required></textarea>
              <div class="invalid-feedback">
                please add valid feedback
              </div>
              </div>
             
          
              <button class="btn btn-primary " style="margin-left: 45%;">Submit</button>
              <br>
            </form>
            <hr>
         
            
            <h4 style="margin-left: 42%;">All Reviews</h4>
            
            <div class="row">
            
            <% for(review of listing.reviews){%>
               <div class="card mb-3 col-5 mt-3" style="margin-left: 5rem; width: 25%;">
                <div class="card-body">
                  <p class="card-text"><b><%= review.author.username%></b></p>
                  <p class="starability-result card-text" data-rating="<%= review.rating%>">
                    Rated: 3 stars
                  </p>
                  <p class="card-text"><%= review.comment%></p>
                
                </div>
                <form method="POST" action="/listings/<%=listing._id%>/reviews/<%=review._id%>?_method=DELETE">
                <button class="btn btn-sm btn-outline-dark mb-2">delete</button>
                </form>
               </div>
          
            <%}%>
          
            </div>
          </div>


        </div>
</div>